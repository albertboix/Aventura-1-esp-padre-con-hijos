<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Botones con iconos reloj</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    background: #f0f0f0;
    overflow: hidden;
  }
  .boton-flotante, .icono-flotante {
    position: fixed;
    background: #007acc;
    color: white;
    border-radius: 50%;
    width: 56px;
    height: 56px;
    font-size: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1001;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    user-select: none;
    transition: left 0.25s ease, top 0.25s ease;
  }
  .icono-flotante {
    width: 44px;
    height: 44px;
    font-size: 1.5rem;
    display: none;
    z-index: 1002;
  }
  #hamburguesa { bottom: 12px; left: 12px; }
  #mas-opciones { bottom: 12px; right: 12px; }
  #btn-mapa { top: 12px; right: 12px; }
</style>
</head>
<body>

<button id="hamburguesa" class="boton-flotante">‚ò∞</button>
<button id="mas-opciones" class="boton-flotante">‚ãÆ</button>
<button id="btn-mapa" class="boton-flotante">üåç</button>

<button class="icono-flotante" id="icono-retos">üß©</button>
<button class="icono-flotante" id="icono-gastronomia">üçΩÔ∏è</button>
<button class="icono-flotante" id="icono-informacion">üåê</button>
<button class="icono-flotante" id="icono-historia">üèõÔ∏è</button>

<button class="icono-flotante" id="icono-agradecimientos">ü§ù</button>
<button class="icono-flotante" id="icono-seguridad">üö¶</button>
<button class="icono-flotante" id="icono-fuentes">üìö</button>

<button class="icono-flotante" id="icono-punto">üìç</button>
<button class="icono-flotante" id="icono-ruta">üó∫Ô∏è</button>
<button class="icono-flotante" id="icono-brujula">üß≠</button>

<script>
  // Iconos por bot√≥n principal
  const gruposIconos = {
    hamburguesa: ['icono-retos', 'icono-gastronomia', 'icono-informacion', 'icono-historia'],
    'mas-opciones': ['icono-agradecimientos', 'icono-seguridad', 'icono-fuentes'],
    'btn-mapa': ['icono-punto', 'icono-ruta', 'icono-brujula']
  };

  // √Ångulos clave para cada bot√≥n (en grados)
  // Definidos como inicio y fin del arco donde se distribuyen iconos
  // El c√≥digo considerar√° el arco m√°s largo entre esos dos √°ngulos (mod 360)
  const angulosClavePorBoton = {
    hamburguesa: [90, 0],          // 12h a 3h
    'mas-opciones': [90, 180],     // 12h a 9h
    'btn-mapa': [180, 270]         // 9h a 6h
  };

  // Radio de dispersi√≥n de iconos
  const radioPorBoton = {
    hamburguesa: 80,
    'mas-opciones': 75,
    'btn-mapa': 60
  };

  // Funci√≥n para normalizar √°ngulo entre 0 y 360
  function normalizarAngulo(a) {
    return (a + 360) % 360;
  }

  // Dado dos √°ngulos (start y end) calcula una lista de √°ngulos equidistantes para n puntos
  // considerando el arco m√°s largo de start a end en sentido horario
  function distribuirAngulos(start, end, n) {
    start = normalizarAngulo(start);
    end = normalizarAngulo(end);

    // Para arco m√°s largo: si end <= start, le sumamos 360
    if (end <= start) end += 360;

    const totalArco = end - start; // grados del arco
    const angulos = [];

    if (n === 1) {
      angulos.push(normalizarAngulo((start + end) / 2));
    } else {
      // Divide el arco en n-1 intervalos y pone los puntos en cada divisi√≥n, incluyendo los extremos
      for(let i=0; i<n; i++) {
        const ang = start + (totalArco * i / (n-1));
        angulos.push(normalizarAngulo(ang));
      }
    }
    return angulos;
  }

  // Estado visibilidad iconos
  const iconosVisibles = {};

  // Ocultar todos los iconos
  function ocultarTodos() {
    Object.values(gruposIconos).flat().forEach(id => {
      const el = document.getElementById(id);
      if (el) {
        el.style.display = 'none';
        iconosVisibles[id] = false;
      }
    });
  }

  // Mostrar iconos con distribuci√≥n en arco definido
  function mostrarIconos(idBoton) {
    const iconos = gruposIconos[idBoton];
    if (!iconos) return;

    const boton = document.getElementById(idBoton);
    if (!boton) return;

    const rect = boton.getBoundingClientRect();
    const cx = rect.left + rect.width / 2;
    const cy = rect.top + rect.height / 2;

    const radio = radioPorBoton[idBoton] || 70;
    const [start, end] = angulosClavePorBoton[idBoton] || [0, 90];

    // Calcular √°ngulos para iconos
    const angulosDistribuidos = distribuirAngulos(start, end, iconos.length);

    // Colocar iconos en sus posiciones
    angulosDistribuidos.forEach((angulo, i) => {
      const el = document.getElementById(iconos[i]);
      if (!el) return;

      const rad = angulo * Math.PI / 180;
      // X crece a la derecha, Y crece hacia abajo, el cos es X, sin es Y, pero invertimos Y para pantalla
      const x = cx + radio * Math.cos(rad) - el.offsetWidth / 2;
      const y = cy - radio * Math.sin(rad) - el.offsetHeight / 2;

      el.style.left = x + 'px';
      el.style.top = y + 'px';
      el.style.position = 'fixed';
      el.style.display = 'flex';
      iconosVisibles[iconos[i]] = true;
    });
  }

  // Inicializaci√≥n
  function inicializar() {
    ocultarTodos();

    Object.keys(gruposIconos).forEach(botonId => {
      const boton = document.getElementById(botonId);
      if (!boton) return;

      boton.addEventListener('click', () => {
        // Si est√°n visibles los iconos de ese bot√≥n, oculta todos
        const iconos = gruposIconos[botonId];
        const algunoVisible = iconos.some(id => iconosVisibles[id]);
        if (algunoVisible) {
          ocultarTodos();
        } else {
          ocultarTodos();
          mostrarIconos(botonId);
        }
      });
    });
  }

  // Ejecutar al cargar
  window.onload = inicializar;
</script>

</body>
</html>
