<!-- Contenido hijo sin <html> ni <body> para facilitar inserción dinámica -->

<!-- Botones principales -->
<button id="hamburguesa" class="boton-flotante">☰</button>
<button id="mas-opciones" class="boton-flotante">⋮</button>
<button id="btn-mapa" class="boton-flotante">🌍</button>

<!-- Iconos hijos -->
<button class="icono-flotante" id="icono-retos">🧩</button>
<button class="icono-flotante" id="icono-gastronomia">🍽️</button>
<button class="icono-flotante" id="icono-informacion">🌐</button>
<button class="icono-flotante" id="icono-historia">🏛️</button>
<button class="icono-flotante" id="icono-agradecimientos">🤝</button>
<button class="icono-flotante" id="icono-seguridad">🚦</button>
<button class="icono-flotante" id="icono-fuentes">📚</button>
<button class="icono-flotante" id="icono-punto">📍</button>
<button class="icono-flotante" id="icono-ruta">🗺️</button>
<button class="icono-flotante" id="icono-brujula">🧭</button>

<style>
  .boton-flotante, .icono-flotante {
    position: fixed;
    background: #007acc;
    color: white;
    border-radius: 50%;
    font-size: 1.6rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    border: none;
  }
  .boton-flotante {
    width: 56px;
    height: 56px;
    z-index: 1001;
  }
  .icono-flotante {
    display: none;
    width: 44px;
    height: 44px;
    font-size: 1.3rem;
    z-index: 1002;
  }

  #hamburguesa { bottom: 12px; left: 12px; }
  #mas-opciones { bottom: 12px; right: 12px; }
  #btn-mapa { top: 12px; right: 12px; }
</style>

<script>
  const gruposIconos = {
    hamburguesa: ['icono-retos','icono-gastronomia','icono-informacion','icono-historia'],
    'mas-opciones': ['icono-agradecimientos','icono-seguridad','icono-fuentes'],
    'btn-mapa': ['icono-punto','icono-ruta','icono-brujula']
  };

  const angulos = {
    'hamburguesa': [270, 300, 330, 0],
    'mas-opciones': [270, 225, 180],
    'btn-mapa': [180, 135, 90]
  };

  function ocultarTodos() {
    Object.values(gruposIconos).flat().forEach(id => {
      const el = document.getElementById(id);
      if (el) el.style.display = 'none';
    });
  }

  function mostrarIconos(idBoton, iconos, angulosDeg, radio = 100) {
    const b = document.getElementById(idBoton);
    const rect = b.getBoundingClientRect();
    const cx = rect.left + rect.width / 2;
    const cy = rect.top + rect.height / 2;

    iconos.forEach((id, i) => {
      const el = document.getElementById(id);
      if (!el) return;
      const angRad = angulosDeg[i] * Math.PI / 180;
      const x = cx + radio * Math.cos(angRad) - el.offsetWidth / 2;
      const y = cy + radio * Math.sin(angRad) - el.offsetHeight / 2;
      el.style.left = `${x}px`;
      el.style.top = `${y}px`;
      el.style.position = 'fixed';
      el.style.display = 'flex';
    });
  }

  Object.entries(gruposIconos).forEach(([botonId, iconoIds]) => {
    const btn = document.getElementById(botonId);
    if (btn) {
      btn.addEventListener('click', () => {
        const visible = iconoIds.some(id => {
          const el = document.getElementById(id);
          return el && el.style.display === 'flex';
        });
        ocultarTodos();
        if (!visible) mostrarIconos(botonId, iconoIds, angulos[botonId]);
      });
    }
  });
</script>
